"use client";
import { AuthContext } from "@/components/layout/AuthProvider";
import { ethers, ParamType } from "ethers";
import { useContext, useEffect, useState } from "react";
import ABI from "../../../contract/PlutusABI.json";
import { getAllEvents } from "@/lib/data";

// const value =
//   "0x000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000000000016000000000000000000000000000000000000000000000000000000000000001a0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000002600000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000b416c69204d6f75736176690000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000014616d6f7573617669674069636c6f75642e636f6d000000000000000000000000000000000000000000000000000000000000000000000000000000000000001ef09f8e8820576520616c6c20666c6f617420646f776e20686572652e2e2e0000000000000000000000000000000000000000000000000000000000000000003b6261666b726569656a666f736b6d687436796233356a6263356e64336e69623337777977686a617737746e6d336470347a62676b346b6a6276356d0000000000000000000000000000000000000000000000000000000000000000000000003b62616679626569656e6e717368337834757234677832756c61337970763572787265746870696a37777169746877356c64613332696a6d66707461000000000000000000000000000000000000000000000000000000000000000000000000755b7b227469746c65223a22496e7374616772616d222c2275726c223a2268747470733a2f2f696e7374616772616d2e636f6d2f616c6d6f6c6f6f227d2c7b227469746c65223a2254776974746572222c2275726c223a2268747470733a2f2f747769747465722e636f6d2f616c6d6f6c6f6f227d5d0000000000000000000000";

const value =
  "0x000000000000000000000000000000000000000000000000000009184e72a000";

const topics = [
  "0x0df85bb53b20db8e0210e6eb32a4345991bc5751ab94abd9a5a60b220a7a501d",
  "0x000000000000000000000000b59191a516f4166e81f6151b96c135552034c900",
  "0x000000000000000000000000e00c8a5f26693f891b088f5ac304ca91888a3c29",
];

export default function page() {
  // const auth = useContext(AuthContext);
  const [is, setIs] = useState<boolean | null>(null);
  useEffect(() => {
    const iFace = new ethers.Interface(ABI);
    const badSample = iFace.decodeEventLog("NewDonation", value, topics);
    // const goodSample = iFace.decodeEventLog("NewUser", value, topics);
    // console.log("good", goodSample);
    console.log("bad", badSample);
    // console.log("good1", goodSample[1][0]);
    console.log("bad1", badSample[1][0]);

    const getEvents = async () => {
      const data = await getAllEvents();
      console.log(data);
    };
    getEvents();
  }, []);

  return (
    <>
      {is === null && <div>null</div>}
      {/* {is === true && <div>true</div>} */}
      {/* {is === false && <div>false</div>} */}
      {/* <div>{converted}</div> */}
    </>
  );
}
